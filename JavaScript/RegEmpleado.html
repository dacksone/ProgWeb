<head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Registro Empleado</title>
      <!-- link documentos css -->
      <link rel="stylesheet" href="css\estilo2.css">
      <link href='https://fonts.googleapis.com/css?family=Nunito:400,300' rel='stylesheet' type='text/css'>
      <!-- <link src="js\jsfile.js" -->
      <script language="JavaScript">
      function Validar( formulario ) {
        //Camptura de datos

        var nombre = formulario.nombre.value;  //nombre
        var nombrelargo = nombre.length;       //tamaño nombre

        var apellido = formulario.apellido.value;  //apellido
        var apellidolargo = apellido.length;       //tamaño apellido

        var cedula = formulario.cedula.value;  //cedula
        var cedulalargo = cedula.length ; // tamaño cedula

        var genero = formulario.genero.value;  //genero
        var fechaingreso = formulario.fechaingreso.value; // fechaingreso
        var sueldobasico = formulario.sueldobasico.value; // sueldobasico
        //var sueldobasico1 = parseint(sueldobasico);
        var numerohijos = formulario.numerohijos.value;  // numerohijos

        var subsidiotransporte = formulario.subsidiotransporte.value // numerohijos
        var subsidiofamiliar = formulario.subsidiofamiliar.value // subsidiofamiliar
        var totaldevengado = formulario.totaldevengado.value // totaldevengado

        //Variable de recorrido
        var listanumeros = "0123456789";
        var totaldevengado;

        // contadores
        var cont = 0;
        //Variables constantes
        const VALORSUBSTRANSP = 102854; // valor de subsidio de transporte
        const VALORSUBFAM = 70000; //  valor de subsidio familiar
        const VALORSALARIOMINIMO = 980657;


        /* Validacion de ingreso de datos */

        //Validacion de nombre
        if(nombrelargo < 1){
          alert("El campo nombre no puede estar vacio");
          formulario.nombre.focus();
          return (false);
        }

        //Validacion de apellido
        if(apellidolargo < 1){
          alert("El campo apellido no puede estar vacio");
          formulario.apellido.focus();
          return (false);
        }

        //Validacion de cedula
        if(cedulalargo < 1){
          alert("El campo cedula no puede estar vacio");
          formulario.cedula.focus();
          return (false);
        }

        //Validacion de cedula <> a numeros

          cont = 0;
          for(i=0;i<cedulalargo;i++)
       {
          ch = cedula.charAt(i);
          for (j=0;j<listanumeros.length; j++)
         {
            if(ch ==listanumeros.charAt(j))
             {
                cont = cont + 1;
                j = listanumeros.length;
                break;
              }
          }
        }
        if(cont < cedulalargo)
        {
          alert("El campo cedula tiene caracteres no permitidos, solo se aceptan numeros");
          formulario.cedula.focus();
          return (false);
        }

        //Validacion de genero
        if(genero == null || genero.length == 0){
          alert("La opcion de genero debe ser seleccionada");
          return (false);
        }

        //Validacion de fecha
        if(fechaingreso == ""){
          alert("El campo de Fecha Ingreso debe ser seleccionada");
          formulario.fechaingreso.focus();
          return (false);
        }

        //Validacion de sueldo basico
        if(sueldobasico == ""){
          alert("El campo Sueldo basico debe ser ingresado");
          formulario.sueldobasico.focus();
          return (false);
        }

        //Validacion de cantidad de hijos
        if(numerohijos == ""){
          alert("El campo Numero de jihos debe ser ingresado");
          //formulario.totaldevengado.value = sueldobasico + subsidiofamiliar + subsidiotransporte;
          formulario.numerohijos.focus();
          return (false);
        }

        /* Validacion de sueldo mayor o menos*/

        if (sueldobasico < VALORSALARIOMINIMO) {
          alert("El sueldo basico debe ser mayor a $ 980.657, de acuerdo al Salario mínimo Legal Vigente año 2020 ");
          formulario.sueldobasico.focus();
          return(false);
        } else if (sueldobasico > 15000000){
            alert("El sueldo basico debe ser menor a $ 15.000.000");
            formulario.sueldobasico.focus();
            return(false);
        }


        /* calculo subsidio de transporte */

          if (sueldobasico < (VALORSALARIOMINIMO + VALORSALARIOMINIMO)) {
            subsidiotransporte = VALORSUBSTRANSP;
            //subsidiotransporte.value = subsidiotransporte;

          } else {
            subsidiotransporte = 0;
            //subsidiotransporte.value = subsidiotransporte;
          }

          /* calculo subsidio familiar */

            if (numerohijos >=1) {
              subsidiofamiliar =  (VALORSUBFAM * numerohijos);

            } else {
              subsidiofamiliar = 0
            }

            /* calculo valor total devengado */

              totaldevengado = pasueldobasico + subsidiotransporte + subsidiofamiliar;
              alert("El salario es:" + totaldevengado);
            }




      function calculoSubTransporte(sueldobasico,subsidiotransporte){

      /*Parametros:*/
      //Variables constantes
      const VALORSUBSTRANSP = 102854; // valor de subsidio de transporte
      const VALORSUBFAM = 70000; //  valor de subsidio familiar
      const VALORSALARIOMINIMO = 980657;


      // Calculo del subtotal
      if (sueldobasico < (VALORSALARIOMINIMO + VALORSALARIOMINIMO)) {
            subsidiotransporte = VALORSUBSTRANSP;

            formulario.subsidiotransporte.value = subsidiotransporte;

          } else {
            subsidiotransporte = 0;
            formulario.subsidiotransporte.value = subsidiotransporte;

          }
        }

        function calculoSubFamiliar(numerohijos,subsidiofamiliar){


        /*Parametros:*/
        //Variables constantes
        const VALORSUBSTRANSP = 102854; // valor de subsidio de transporte
        const VALORSUBFAM = 70000; //  valor de subsidio familiar
        const VALORSALARIOMINIMO = 980657;

        // Calculo del subtotal


          if (numerohijos >=1) {
            subsidiofamiliar =  (VALORSUBFAM * numerohijos);
            formulario.subsidiofamiliar.value = subsidiofamiliar;

            var total = +formulario.sueldobasico.value + +formulario.subsidiofamiliar.value + +formulario.subsidiotransporte.value;
            formulario.totaldevengado.value = total;

          } else {
            subsidiofamiliar = 0
            formulario.subsidiofamiliar.value = subsidiofamiliar;


            var total = +formulario.sueldobasico.value + +formulario.subsidiofamiliar.value + +formulario.subsidiotransporte.value;
            formulario.totaldevengado.value = total;
          }

        }




      </script>
  </head>
  <body>
    <!-- Inicio de formulario -->
    <form name="formulario"  ACTION ="programa1.php" METHOD="get" onSubmit="return Validar(this);">

      <!-- Titulo del formulario -->
      <h1>Registro de empleado</h1>

      <!-- Agrupacion de campos -->
      <fieldset>

        <!-- Titulo de agrupacion de campos -->
        <legend><span class="number">1</span>Ingrese los datos del empleado</legend>

        <!-- Campo nombre -->
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre">

        <!-- Campo apellido -->
        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" name="apellido">

        <!-- Campo cedula -->
        <label for="cedula">Cedula:</label>
        <input placeholder="Ingrese solo numeros"  type="text" id="cedula" name="cedula">

        <!-- Campo genero -->
        <label for="genero">Genero:</label>
        <input type="radio" id="genero" value="Masculino" name="genero"><label for="under_13" class="light">Masculino</label><br>
        <input type="radio" id="genero" value="Femenino" name="genero"><label for="over_13" class="light">Femenino</label><br>

        <!-- Campo fecha Ingreso -->
        <label for="fechaingreso">Fecha de ingreso:</label>
        <input type="date" id="fechaingreso" name="fechaingreso">

        <!-- Campo sueldo basico -->
        <label for="sueldobasico">Sueldo basico:</label>
        <!--<input placeholder="Ingrese el valor numerico sin . o ," type="text" id="sueldobasico" name="sueldobasico"  > -->
        <input placeholder="Ingrese el valor numerico sin . o ," type="text" id="sueldobasico" name="sueldobasico" onChange="calculoSubTransporte(this.value,subsidiotransporte);" >
        <!-- Campo numero de hijos -->
        <label for="numerohijos">Numero de hijos:</label>
        <input placeholder="Ingrese el valor numerico" type="text" id="numerohijos" name="numerohijos" onChange="calculoSubFamiliar(this.value,subsidiofamiliar);" >

        <!-- Campo subisidio de transporte -->
        <label for="subsidiotransporte">Subsidio de transporte:</label>
        <input readonly  placeholder="campo de solo lectura" type="text" id="subsidiotransporte" name="subsidiotransporte" value="">

        <!-- Campo subisidio familiar -->
        <label for="subsidiofamiliar">Subsidio familiar:</label>
        <input readonly placeholder="campo de solo lectura" type="text" id="subsidiofamiliar" name="subsidiofamiliar" value="">

        <!-- Campo total devengado -->
        <label for="totaldevengado">Total devengado:</label>
        <input readonly placeholder="campo de solo lectura" type="text" id="totaldevengado" name="totaldevengado" value="">

      </fieldset>

      <button type="submit">Guardar</button>
      <a href="index.html"><button>Volver</button></a>
    </form>
    <!-- Fin formulario -->

  </body>
</html>
